env:
  JULIA_VERSION: "1.9.3"

steps:

  - label: ":sunrise: initialize julia"
    command: 
      - "module load julia"
      - "echo $JULIA_VERSION"
      - "julia --project -e 'using Pkg; Pkg.instantiate(;verbose=true)'"
      - "julia --project -e 'using Pkg; Pkg.precompile'"
      - "julia --project -e 'using Pkg; Pkg.status'"
    agents:
      config: cpu
      queue: central
      slurm_ntasks: 1
  
  - wait 

  - label: "run tests"
    command:
      - "sbatch jobscript.sh"

